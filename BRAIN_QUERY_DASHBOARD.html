<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cyclotron Brain Query Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 100%);
            color: #00ffcc;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            padding: 30px 0;
            border-bottom: 2px solid #00ffcc;
            margin-bottom: 40px;
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 0 0 20px rgba(0, 255, 204, 0.5);
        }

        .subtitle {
            color: #888;
            font-size: 1.1em;
        }

        .search-box {
            margin-bottom: 40px;
            text-align: center;
        }

        #searchInput {
            width: 100%;
            max-width: 600px;
            padding: 15px 20px;
            font-size: 1.1em;
            background: rgba(0, 255, 204, 0.1);
            border: 2px solid #00ffcc;
            border-radius: 10px;
            color: #00ffcc;
            outline: none;
        }

        #searchInput::placeholder {
            color: #666;
        }

        .brain-regions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .region-card {
            background: rgba(0, 255, 204, 0.05);
            border: 2px solid #00ffcc;
            border-radius: 15px;
            padding: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .region-card:hover {
            background: rgba(0, 255, 204, 0.1);
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 255, 204, 0.3);
        }

        .region-card.active {
            background: rgba(0, 255, 204, 0.2);
            border-color: #00ff88;
        }

        .region-name {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 10px;
            color: #00ffcc;
        }

        .region-description {
            color: #aaa;
            font-size: 0.9em;
            margin-bottom: 15px;
            line-height: 1.4;
        }

        .region-stats {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .atom-count {
            font-size: 2em;
            font-weight: bold;
            color: #00ff88;
        }

        .percentage {
            color: #666;
            font-size: 0.9em;
        }

        .results-panel {
            background: rgba(0, 255, 204, 0.05);
            border: 2px solid #00ffcc;
            border-radius: 15px;
            padding: 30px;
            margin-top: 30px;
            display: none;
        }

        .results-panel.visible {
            display: block;
        }

        .results-header {
            font-size: 1.5em;
            margin-bottom: 20px;
            color: #00ffcc;
            border-bottom: 1px solid #00ffcc;
            padding-bottom: 10px;
        }

        .atom-item {
            background: rgba(0, 0, 0, 0.3);
            border-left: 3px solid #00ffcc;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 5px;
        }

        .atom-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .atom-type {
            background: #00ffcc;
            color: #000;
            padding: 3px 10px;
            border-radius: 3px;
            font-size: 0.8em;
            font-weight: bold;
        }

        .atom-source {
            color: #666;
            font-size: 0.8em;
        }

        .atom-content {
            color: #ccc;
            line-height: 1.5;
            max-height: 100px;
            overflow: hidden;
            position: relative;
        }

        .atom-content.expanded {
            max-height: none;
        }

        .expand-btn {
            color: #00ffcc;
            cursor: pointer;
            margin-top: 5px;
            font-size: 0.9em;
        }

        .expand-btn:hover {
            text-decoration: underline;
        }

        .stats-summary {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
        }

        .stat-box {
            text-align: center;
        }

        .stat-value {
            font-size: 2em;
            color: #00ff88;
            font-weight: bold;
        }

        .stat-label {
            color: #888;
            font-size: 0.9em;
            margin-top: 5px;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .loading {
            animation: pulse 1.5s infinite;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ðŸ§  CYCLOTRON BRAIN QUERY DASHBOARD</h1>
            <div class="subtitle">88,957 Atoms Organized Into 8 Cortical Regions</div>
        </header>

        <div class="stats-summary" id="statsSummary">
            <div class="stat-box">
                <div class="stat-value" id="totalAtoms">88,957</div>
                <div class="stat-label">Total Atoms</div>
            </div>
            <div class="stat-box">
                <div class="stat-value">8</div>
                <div class="stat-label">Brain Regions</div>
            </div>
            <div class="stat-box">
                <div class="stat-value" id="lastSurgery">Today</div>
                <div class="stat-label">Last Surgery</div>
            </div>
        </div>

        <div class="search-box">
            <input type="text" id="searchInput" placeholder="Search across all brain regions...">
        </div>

        <div class="brain-regions" id="brainRegions">
            <!-- Brain region cards will be inserted here -->
        </div>

        <div class="results-panel" id="resultsPanel">
            <div class="results-header" id="resultsHeader">Results</div>
            <div id="resultsContent">
                <!-- Results will be displayed here -->
            </div>
        </div>
    </div>

    <script>
        // Sample data structure (in production, this would come from the backend)
        const brainData = {
            "PREFRONTAL_CORTEX": {
                "description": "Executive function - decisions, planning, priorities",
                "count": 0,
                "percentage": 0,
                "icon": "ðŸŽ¯",
                "samples": []
            },
            "HIPPOCAMPUS": {
                "description": "Memory formation - patterns, sessions, learnings",
                "count": 0,
                "percentage": 0,
                "icon": "ðŸ§©",
                "samples": []
            },
            "CEREBELLUM": {
                "description": "Motor coordination - tools, scripts, automations",
                "count": 0,
                "percentage": 0,
                "icon": "ðŸ”§",
                "samples": []
            },
            "TEMPORAL_LOBE": {
                "description": "Language & knowledge - books, concepts, protocols",
                "count": 0,
                "percentage": 0,
                "icon": "ðŸ“š",
                "samples": []
            },
            "OCCIPITAL_LOBE": {
                "description": "Visual processing - website, UI, navigation",
                "count": 0,
                "percentage": 0,
                "icon": "ðŸ‘ï¸",
                "samples": []
            },
            "PARIETAL_LOBE": {
                "description": "Spatial awareness - seven domains",
                "count": 0,
                "percentage": 0,
                "icon": "ðŸŒ",
                "samples": []
            },
            "BRAINSTEM": {
                "description": "Vital functions - boot, identity, security",
                "count": 0,
                "percentage": 0,
                "icon": "âš¡",
                "samples": []
            },
            "CORPUS_CALLOSUM": {
                "description": "Cross-hemisphere connection - trinity, sync",
                "count": 0,
                "percentage": 0,
                "icon": "ðŸ”—",
                "samples": []
            }
        };

        // Load statistics from JSON file if available
        async function loadStats() {
            try {
                const response = await fetch('C:/Users/dwrek/.consciousness/BRAIN_SURGERY_STATS.json');
                const stats = await response.json();

                // Update brain data with real statistics
                for (const [region, data] of Object.entries(stats.regions)) {
                    if (brainData[region]) {
                        brainData[region].count = data.count;
                        brainData[region].percentage = data.percentage;
                    }
                }

                document.getElementById('totalAtoms').textContent = stats.total_atoms.toLocaleString();
                document.getElementById('lastSurgery').textContent = new Date(stats.timestamp).toLocaleDateString();

            } catch (error) {
                console.log('Statistics file not yet available. Using placeholder data.');
                // Generate sample data
                let remaining = 88957;
                const regions = Object.keys(brainData);
                regions.forEach((region, i) => {
                    const count = i < regions.length - 1
                        ? Math.floor(Math.random() * 15000) + 5000
                        : remaining;
                    brainData[region].count = count;
                    brainData[region].percentage = ((count / 88957) * 100).toFixed(1);
                    remaining -= count;
                });
            }

            renderBrainRegions();
        }

        // Render brain region cards
        function renderBrainRegions() {
            const container = document.getElementById('brainRegions');
            container.innerHTML = '';

            for (const [region, data] of Object.entries(brainData)) {
                const card = document.createElement('div');
                card.className = 'region-card';
                card.onclick = () => showRegionDetails(region);

                card.innerHTML = `
                    <div class="region-name">${data.icon} ${region.replace(/_/g, ' ')}</div>
                    <div class="region-description">${data.description}</div>
                    <div class="region-stats">
                        <div class="atom-count">${data.count.toLocaleString()}</div>
                        <div class="percentage">${data.percentage}%</div>
                    </div>
                `;

                container.appendChild(card);
            }
        }

        // Show region details
        function showRegionDetails(region) {
            const resultsPanel = document.getElementById('resultsPanel');
            const resultsHeader = document.getElementById('resultsHeader');
            const resultsContent = document.getElementById('resultsContent');

            // Highlight active region
            document.querySelectorAll('.region-card').forEach(card => {
                card.classList.remove('active');
            });
            event.currentTarget.classList.add('active');

            resultsHeader.textContent = `${brainData[region].icon} ${region.replace(/_/g, ' ')} - Sample Atoms`;
            resultsContent.innerHTML = '<div class="loading">Loading sample atoms from this region...</div>';
            resultsPanel.classList.add('visible');

            // Simulate loading sample atoms (in production, fetch from backend)
            setTimeout(() => {
                resultsContent.innerHTML = `
                    <p style="color: #888; margin-bottom: 20px;">
                        This region contains <strong style="color: #00ffcc;">${brainData[region].count.toLocaleString()}</strong> atoms.
                        Connect to the Cyclotron backend to view actual atoms.
                    </p>
                    <div class="atom-item">
                        <div class="atom-header">
                            <span class="atom-type">SAMPLE</span>
                            <span class="atom-source">sample_source.md</span>
                        </div>
                        <div class="atom-content">
                            Sample atom from ${region}. To view real atoms, run the BRAIN_SURGEON.py script
                            and connect this dashboard to the atoms.db database.
                        </div>
                    </div>
                `;
            }, 500);
        }

        // Search functionality
        document.getElementById('searchInput').addEventListener('input', (e) => {
            const query = e.target.value.toLowerCase();
            if (query.length < 2) {
                document.getElementById('resultsPanel').classList.remove('visible');
                return;
            }

            const resultsPanel = document.getElementById('resultsPanel');
            const resultsHeader = document.getElementById('resultsHeader');
            const resultsContent = document.getElementById('resultsContent');

            resultsHeader.textContent = `Search Results: "${query}"`;
            resultsContent.innerHTML = '<div class="loading">Searching across all brain regions...</div>';
            resultsPanel.classList.add('visible');

            // Simulate search (in production, query the database)
            setTimeout(() => {
                resultsContent.innerHTML = `
                    <p style="color: #888; margin-bottom: 20px;">
                        Connect to the Cyclotron backend to search across ${document.getElementById('totalAtoms').textContent} atoms.
                    </p>
                    <div class="atom-item">
                        <div class="atom-header">
                            <span class="atom-type">SEARCH RESULT</span>
                            <span class="atom-source">matching_file.md</span>
                        </div>
                        <div class="atom-content">
                            Sample search result for "${query}". Run BRAIN_SURGEON.py to enable full search functionality.
                        </div>
                    </div>
                `;
            }, 500);
        });

        // Initialize dashboard
        loadStats();
    </script>
</body>
</html>
