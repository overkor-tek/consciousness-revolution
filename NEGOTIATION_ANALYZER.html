<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Negotiation Analyzer | Pattern Theory</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0a0a1a 0%, #1a1a3a 100%);
            min-height: 100vh;
            color: #fff;
            padding: 20px;
        }

        .container { max-width: 600px; margin: 0 auto; }

        .header {
            text-align: center;
            margin-bottom: 24px;
        }

        .header h1 { font-size: 24px; margin-bottom: 8px; }
        .header p { opacity: 0.6; font-size: 13px; }

        .input-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 20px;
        }

        .text-input {
            width: 100%;
            padding: 14px;
            border: none;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            font-size: 14px;
            resize: none;
            height: 120px;
            margin-bottom: 16px;
        }

        .text-input::placeholder { color: rgba(255, 255, 255, 0.3); }

        .analyze-btn {
            width: 100%;
            padding: 14px;
            font-size: 14px;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            cursor: pointer;
        }

        .results {
            display: none;
            animation: fadeIn 0.4s ease;
        }

        .results.active { display: block; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .position-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 20px;
            text-align: center;
        }

        .position-icon { font-size: 48px; margin-bottom: 8px; }

        .position-label {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .position-label.strong { color: #2ecc71; }
        .position-label.balanced { color: #f1c40f; }
        .position-label.weak { color: #e74c3c; }

        .position-desc {
            font-size: 13px;
            opacity: 0.7;
        }

        .tactics {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 20px;
        }

        .tactics h3 {
            font-size: 14px;
            margin-bottom: 16px;
        }

        .tactic {
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 10px;
        }

        .tactic.aggressive {
            background: rgba(231, 76, 60, 0.1);
            border-left: 3px solid #e74c3c;
        }

        .tactic.subtle {
            background: rgba(241, 196, 15, 0.1);
            border-left: 3px solid #f1c40f;
        }

        .tactic.fair {
            background: rgba(46, 204, 113, 0.1);
            border-left: 3px solid #2ecc71;
        }

        .tactic-name {
            font-size: 12px;
            font-weight: bold;
            margin-bottom: 4px;
        }

        .tactic.aggressive .tactic-name { color: #e74c3c; }
        .tactic.subtle .tactic-name { color: #f1c40f; }
        .tactic.fair .tactic-name { color: #2ecc71; }

        .tactic-desc {
            font-size: 11px;
            opacity: 0.8;
        }

        .counters {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 20px;
        }

        .counters h3 {
            font-size: 14px;
            margin-bottom: 16px;
        }

        .counter {
            font-size: 12px;
            padding: 8px 0;
            padding-left: 20px;
            position: relative;
        }

        .counter::before {
            content: "â†’";
            position: absolute;
            left: 0;
            color: #667eea;
        }

        .principles {
            background: rgba(102, 126, 234, 0.1);
            border-radius: 12px;
            padding: 16px;
        }

        .principles h4 {
            font-size: 12px;
            color: #667eea;
            margin-bottom: 8px;
        }

        .principle {
            font-size: 12px;
            padding: 4px 0;
        }

        footer {
            text-align: center;
            margin-top: 30px;
            font-size: 11px;
            opacity: 0.4;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Negotiation Analyzer</h1>
            <p>Identify tactics and strengthen your position</p>
        </div>

        <div class="input-section">
            <textarea class="text-input" id="input" placeholder="Describe the negotiation, their offer, or paste what they said..."></textarea>
            <button class="analyze-btn" onclick="analyze()">Analyze Negotiation</button>
        </div>

        <div class="results" id="results">
            <div class="position-card">
                <div class="position-icon" id="positionIcon">-</div>
                <div class="position-label" id="positionLabel">-</div>
                <div class="position-desc" id="positionDesc">-</div>
            </div>

            <div class="tactics">
                <h3>Tactics Being Used</h3>
                <div id="tacticsList"></div>
            </div>

            <div class="counters">
                <h3>Counter Strategies</h3>
                <div id="countersList"></div>
            </div>

            <div class="principles">
                <h4>Negotiation Principles</h4>
                <div id="principlesList"></div>
            </div>
        </div>

        <footer>
            Pattern Theory â€¢ <a href="consciousness-tools.html" style="color: #667eea;">More Tools</a>
        </footer>
    </div>

    <script>
        const NEGOTIATION_TACTICS = {
            aggressive: {
                'Anchoring High/Low': {
                    markers: ['best offer', 'final price', 'can\'t go lower', 'maximum', 'highest'],
                    desc: 'Extreme initial position to shift expectations',
                    counter: 'Don\'t accept their anchor. Set your own based on research'
                },
                'Take It or Leave It': {
                    markers: ['take it or leave', 'final offer', 'non-negotiable', 'last chance', 'walking away'],
                    desc: 'False ultimatum to force quick decision',
                    counter: 'Call the bluff. Say "I need time to consider" and pause'
                },
                'Good Cop Bad Cop': {
                    markers: ['my boss', 'i want to help', 'out of my hands', 'they won\'t approve'],
                    desc: 'Creating artificial authority to limit concessions',
                    counter: 'Ask to speak directly with the decision maker'
                },
                'Deadline Pressure': {
                    markers: ['today only', 'expires', 'running out', 'must decide now', 'deadline'],
                    desc: 'Artificial urgency to prevent research',
                    counter: 'Never decide under artificial pressure. Real deals wait'
                }
            },
            subtle: {
                'Nibbling': {
                    markers: ['one more thing', 'just add', 'small favor', 'while we\'re at it', 'also'],
                    desc: 'Adding extra demands after agreement',
                    counter: 'For each new ask, reopen previous concessions'
                },
                'Emotional Appeal': {
                    markers: ['trust me', 'i thought we', 'friends', 'relationship', 'loyalty'],
                    desc: 'Using relationship to bypass logic',
                    counter: 'Separate emotional appeals from the actual deal terms'
                },
                'Lowballing': {
                    markers: ['just', 'only', 'small', 'simple', 'easy', 'quick'],
                    desc: 'Minimizing what they\'re asking',
                    counter: 'Calculate the true cost of what they\'re requesting'
                },
                'Flinch': {
                    markers: ['surprised', 'shocked', 'didn\'t expect', 'wow', 'really'],
                    desc: 'Exaggerated reaction to make you doubt',
                    counter: 'Ignore the performance. Stay silent and confident'
                }
            },
            fair: {
                'Interest-Based': {
                    markers: ['both of us', 'win-win', 'mutual', 'interests', 'needs'],
                    desc: 'Focus on underlying interests, not positions'
                },
                'Objective Criteria': {
                    markers: ['market rate', 'standard', 'fair', 'data shows', 'comparable'],
                    desc: 'Using external standards to guide agreement'
                }
            }
        };

        function analyze() {
            const text = document.getElementById('input').value.trim();
            if (!text) return;

            const lower = text.toLowerCase();
            const found = { aggressive: [], subtle: [], fair: [] };

            // Check tactics
            Object.entries(NEGOTIATION_TACTICS).forEach(([type, tactics]) => {
                Object.entries(tactics).forEach(([name, data]) => {
                    if (data.markers.some(m => lower.includes(m))) {
                        found[type].push({
                            name,
                            desc: data.desc,
                            counter: data.counter || ''
                        });
                    }
                });
            });

            // Assess position
            const aggressiveCount = found.aggressive.length;
            const subtleCount = found.subtle.length;
            const fairCount = found.fair.length;

            let icon, label, desc, labelClass;
            if (aggressiveCount >= 2) {
                icon = 'âš ï¸';
                label = 'HIGH-PRESSURE TACTICS';
                desc = 'Aggressive negotiation - protect your interests';
                labelClass = 'weak';
            } else if (aggressiveCount >= 1 || subtleCount >= 2) {
                icon = 'âš¡';
                label = 'TACTICAL NEGOTIATION';
                desc = 'Standard tactics in use - stay aware';
                labelClass = 'balanced';
            } else if (fairCount > 0) {
                icon = 'âœ…';
                label = 'COLLABORATIVE APPROACH';
                desc = 'Signs of fair negotiation - but verify';
                labelClass = 'strong';
            } else {
                icon = 'ðŸ“Š';
                label = 'ASSESS FURTHER';
                desc = 'Need more information to evaluate';
                labelClass = 'balanced';
            }

            // Generate counters
            const counters = [
                ...found.aggressive.map(t => t.counter),
                ...found.subtle.map(t => t.counter)
            ].filter(c => c);

            if (counters.length === 0) {
                counters.push('Research comparable deals before responding');
            }

            // Generate principles
            const principles = generatePrinciples(found);

            // Render results
            document.getElementById('positionIcon').textContent = icon;
            const labelEl = document.getElementById('positionLabel');
            labelEl.textContent = label;
            labelEl.className = 'position-label ' + labelClass;
            document.getElementById('positionDesc').textContent = desc;

            // Combine all tactics
            const allTactics = [
                ...found.aggressive.map(t => ({ ...t, type: 'aggressive' })),
                ...found.subtle.map(t => ({ ...t, type: 'subtle' })),
                ...found.fair.map(t => ({ ...t, type: 'fair' }))
            ];

            if (allTactics.length > 0) {
                document.getElementById('tacticsList').innerHTML = allTactics.map(t => `
                    <div class="tactic ${t.type}">
                        <div class="tactic-name">${t.name}</div>
                        <div class="tactic-desc">${t.desc}</div>
                    </div>
                `).join('');
            } else {
                document.getElementById('tacticsList').innerHTML =
                    '<div class="tactic fair"><div class="tactic-name">No Clear Tactics</div><div class="tactic-desc">No obvious negotiation tactics detected</div></div>';
            }

            document.getElementById('countersList').innerHTML = counters.slice(0, 5).map(c =>
                `<div class="counter">${c}</div>`
            ).join('');

            document.getElementById('principlesList').innerHTML = principles.map(p =>
                `<div class="principle">â€¢ ${p}</div>`
            ).join('');

            document.getElementById('results').classList.add('active');
        }

        function generatePrinciples(found) {
            const principles = [
                'Know your BATNA (Best Alternative to Negotiated Agreement)',
                'The first to name a number often loses',
                'Silence is a powerful tool - use it'
            ];

            if (found.aggressive.length > 0) {
                principles.push('You can always walk away - that\'s your power');
            }

            principles.push('Focus on interests, not positions');
            principles.push('Never negotiate against yourself');

            return principles.slice(0, 5);
        }
    </script>
</body>
</html>
