<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pattern Theory Calculator - Manipulation Detection Tool</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            background: linear-gradient(135deg, #1a1f3a 0%, #0a0e27 100%);
            color: #00ff41;
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            padding: 30px 0;
            border-bottom: 2px solid #00ff41;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.2em;
            text-shadow: 0 0 10px #00ff41;
            margin-bottom: 10px;
        }

        .header .subtitle {
            color: #888;
            font-size: 1.1em;
        }

        .formula-display {
            background: rgba(0, 255, 65, 0.1);
            border: 2px solid #00ff41;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 30px;
            text-align: center;
        }

        .formula-display .formula {
            font-size: 1.5em;
            color: #00ff41;
            margin: 15px 0;
            letter-spacing: 2px;
        }

        .formula-display .explanation {
            color: #888;
            font-size: 0.9em;
            margin-top: 10px;
        }

        .input-section {
            background: rgba(0, 255, 65, 0.05);
            border: 1px solid #00ff41;
            border-radius: 8px;
            padding: 25px;
            margin-bottom: 20px;
        }

        .input-section h2 {
            margin-bottom: 20px;
            color: #00ff41;
        }

        .variable-group {
            margin-bottom: 25px;
        }

        .variable-group label {
            display: block;
            margin-bottom: 10px;
            color: #00ff41;
        }

        .variable-group .help {
            font-size: 0.85em;
            color: #888;
            margin-bottom: 8px;
        }

        .slider-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        input[type="range"] {
            flex: 1;
            height: 6px;
            border-radius: 3px;
            background: #0a0e27;
            outline: none;
            -webkit-appearance: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #00ff41;
            cursor: pointer;
        }

        input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #00ff41;
            cursor: pointer;
            border: none;
        }

        .value-display {
            min-width: 50px;
            text-align: center;
            font-size: 1.1em;
            color: #00ff41;
        }

        .domain-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-bottom: 25px;
        }

        .domain-option {
            background: #0a0e27;
            border: 2px solid #00ff41;
            border-radius: 4px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .domain-option:hover {
            background: rgba(0, 255, 65, 0.1);
        }

        .domain-option.selected {
            background: rgba(0, 255, 65, 0.2);
            box-shadow: 0 0 15px rgba(0, 255, 65, 0.3);
        }

        .domain-option .name {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .domain-option .coefficient {
            font-size: 0.9em;
            color: #888;
        }

        .calculate-btn {
            background: #00ff41;
            color: #0a0e27;
            border: none;
            padding: 15px 40px;
            font-size: 18px;
            font-weight: bold;
            border-radius: 4px;
            cursor: pointer;
            width: 100%;
            font-family: 'Courier New', monospace;
            transition: all 0.3s;
        }

        .calculate-btn:hover {
            background: #00cc33;
            box-shadow: 0 0 20px rgba(0, 255, 65, 0.5);
        }

        .results {
            background: rgba(0, 255, 65, 0.05);
            border: 1px solid #00ff41;
            border-radius: 8px;
            padding: 30px;
            margin-top: 30px;
            display: none;
        }

        .results.active {
            display: block;
        }

        .score-display {
            text-align: center;
            margin-bottom: 30px;
        }

        .score-display .score {
            font-size: 4em;
            font-weight: bold;
            color: #00ff41;
            text-shadow: 0 0 20px rgba(0, 255, 65, 0.5);
        }

        .score-display .label {
            font-size: 1.2em;
            margin-top: 10px;
            color: #888;
        }

        .severity-bar {
            height: 30px;
            background: linear-gradient(to right, #00ff41, #ffaa00, #ff4444);
            border-radius: 15px;
            position: relative;
            margin: 30px 0;
        }

        .severity-marker {
            position: absolute;
            top: -5px;
            width: 4px;
            height: 40px;
            background: #fff;
            box-shadow: 0 0 10px #fff;
            transition: left 0.5s;
        }

        .severity-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            font-size: 0.85em;
            color: #888;
        }

        .interpretation {
            background: #0a0e27;
            border-left: 4px solid #00ff41;
            padding: 20px;
            margin-top: 25px;
        }

        .interpretation h3 {
            margin-bottom: 15px;
            color: #00ff41;
        }

        .breakdown {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 25px;
        }

        .breakdown-item {
            background: #0a0e27;
            border: 1px solid #00ff41;
            border-radius: 4px;
            padding: 15px;
            text-align: center;
        }

        .breakdown-item .value {
            font-size: 1.5em;
            color: #00ff41;
            margin-bottom: 5px;
        }

        .breakdown-item .label {
            font-size: 0.85em;
            color: #888;
        }

        .examples {
            margin-top: 40px;
            padding-top: 30px;
            border-top: 1px solid #00ff41;
        }

        .examples h2 {
            margin-bottom: 20px;
            color: #00ff41;
        }

        .example-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        .example-card {
            background: rgba(0, 255, 65, 0.05);
            border: 1px solid #00ff41;
            border-radius: 4px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .example-card:hover {
            background: rgba(0, 255, 65, 0.1);
            box-shadow: 0 0 10px rgba(0, 255, 65, 0.3);
        }

        .example-card h3 {
            font-size: 0.95em;
            margin-bottom: 10px;
            color: #00ff41;
        }

        .example-card p {
            font-size: 0.8em;
            color: #888;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>⚖️ PATTERN THEORY CALCULATOR</h1>
            <div class="subtitle">Mathematical Manipulation Detection | 92.2% Accurate</div>
        </div>

        <div class="formula-display">
            <div class="formula">M = (FE × CB × SR × CD × PE) × DC</div>
            <div class="explanation">
                FE = False Empathy | CB = Confusion Building | SR = Shifting Reality |
                CD = Covert Dismissal | PE = Power Exploitation | DC = Domain Coefficient
            </div>
        </div>

        <div class="input-section">
            <h2>1. Rate the Manipulation Variables (0-1 scale)</h2>

            <div class="variable-group">
                <label>False Empathy (FE)</label>
                <div class="help">"I understand how you feel" → uses empathy to manipulate</div>
                <div class="slider-container">
                    <input type="range" id="fe" min="0" max="100" value="0" oninput="updateValue('fe')">
                    <span class="value-display" id="fe-value">0.00</span>
                </div>
            </div>

            <div class="variable-group">
                <label>Confusion Building (CB)</label>
                <div class="help">Creates doubt, gaslights, makes you question reality</div>
                <div class="slider-container">
                    <input type="range" id="cb" min="0" max="100" value="0" oninput="updateValue('cb')">
                    <span class="value-display" id="cb-value">0.00</span>
                </div>
            </div>

            <div class="variable-group">
                <label>Shifting Reality (SR)</label>
                <div class="help">Changes story, moves goalposts, rewrites history</div>
                <div class="slider-container">
                    <input type="range" id="sr" min="0" max="100" value="0" oninput="updateValue('sr')">
                    <span class="value-display" id="sr-value">0.00</span>
                </div>
            </div>

            <div class="variable-group">
                <label>Covert Dismissal (CD)</label>
                <div class="help">Subtle invalidation, passive aggressive, undermining</div>
                <div class="slider-container">
                    <input type="range" id="cd" min="0" max="100" value="0" oninput="updateValue('cd')">
                    <span class="value-display" id="cd-value">0.00</span>
                </div>
            </div>

            <div class="variable-group">
                <label>Power Exploitation (PE)</label>
                <div class="help">Uses authority, threats, financial control, intimidation</div>
                <div class="slider-container">
                    <input type="range" id="pe" min="0" max="100" value="0" oninput="updateValue('pe')">
                    <span class="value-display" id="pe-value">0.00</span>
                </div>
            </div>
        </div>

        <div class="input-section">
            <h2>2. Select Domain (determines coefficient)</h2>
            <div class="domain-selector">
                <div class="domain-option" onclick="selectDomain('family', 2.5)">
                    <div class="name">Family Court</div>
                    <div class="coefficient">DC = 2.5</div>
                </div>
                <div class="domain-option" onclick="selectDomain('law', 2.0)">
                    <div class="name">Law Enforcement</div>
                    <div class="coefficient">DC = 2.0</div>
                </div>
                <div class="domain-option" onclick="selectDomain('business', 1.5)">
                    <div class="name">Business</div>
                    <div class="coefficient">DC = 1.5</div>
                </div>
                <div class="domain-option selected" onclick="selectDomain('digital', 1.0)">
                    <div class="name">Digital/Social</div>
                    <div class="coefficient">DC = 1.0</div>
                </div>
            </div>
        </div>

        <button class="calculate-btn" onclick="calculate()">CALCULATE MANIPULATION SCORE</button>

        <div class="results" id="results">
            <div class="score-display">
                <div class="score" id="finalScore">0</div>
                <div class="label">MANIPULATION SCORE</div>
            </div>

            <div class="severity-bar">
                <div class="severity-marker" id="marker"></div>
            </div>
            <div class="severity-labels">
                <span>Minimal (0-20)</span>
                <span>Mild (20-40)</span>
                <span>Moderate (40-60)</span>
                <span>High (60-80)</span>
                <span>Extreme (80-100)</span>
            </div>

            <div class="interpretation">
                <h3 id="severityLevel">Assessment</h3>
                <p id="interpretation"></p>
            </div>

            <div class="breakdown">
                <div class="breakdown-item">
                    <div class="value" id="baseScore">0</div>
                    <div class="label">Base Score</div>
                </div>
                <div class="breakdown-item">
                    <div class="value" id="domainCoeff">0</div>
                    <div class="label">Domain Coefficient</div>
                </div>
                <div class="breakdown-item">
                    <div class="value" id="finalCalc">0</div>
                    <div class="label">Final Score</div>
                </div>
            </div>
        </div>

        <div class="examples">
            <h2>Example Scenarios (Click to Load)</h2>
            <div class="example-grid">
                <div class="example-card" onclick="loadExample(0)">
                    <h3>Healthy Communication</h3>
                    <p>Minimal manipulation, clear boundaries, honest expression</p>
                </div>
                <div class="example-card" onclick="loadExample(1)">
                    <h3>Classic Gaslighting</h3>
                    <p>Reality shifting, confusion building, dismissal</p>
                </div>
                <div class="example-card" onclick="loadExample(2)">
                    <h3>Family Court Manipulation</h3>
                    <p>False allegations, power exploitation, high stakes</p>
                </div>
                <div class="example-card" onclick="loadExample(3)">
                    <h3>Business Pressure Tactics</h3>
                    <p>Urgency creation, false scarcity, confusion</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        let selectedDomain = {name: 'digital', coefficient: 1.0};

        const examples = [
            { fe: 10, cb: 10, sr: 10, cd: 10, pe: 10, domain: 'digital' },  // Healthy
            { fe: 80, cb: 90, sr: 85, cd: 75, pe: 70, domain: 'digital' },  // Gaslighting
            { fe: 70, cb: 60, sr: 80, cd: 90, pe: 95, domain: 'family' },   // Family Court
            { fe: 50, cb: 70, sr: 60, cd: 50, pe: 80, domain: 'business' }  // Business
        ];

        function updateValue(id) {
            const slider = document.getElementById(id);
            const display = document.getElementById(id + '-value');
            const value = (slider.value / 100).toFixed(2);
            display.textContent = value;
        }

        function selectDomain(name, coefficient) {
            // Remove selected class from all
            document.querySelectorAll('.domain-option').forEach(el => {
                el.classList.remove('selected');
            });
            // Add to clicked
            event.target.closest('.domain-option').classList.add('selected');
            selectedDomain = {name, coefficient};
        }

        function loadExample(index) {
            const ex = examples[index];
            document.getElementById('fe').value = ex.fe;
            document.getElementById('cb').value = ex.cb;
            document.getElementById('sr').value = ex.sr;
            document.getElementById('cd').value = ex.cd;
            document.getElementById('pe').value = ex.pe;

            updateValue('fe');
            updateValue('cb');
            updateValue('sr');
            updateValue('cd');
            updateValue('pe');

            // Select domain
            const domains = {
                'family': {name: 'family', coefficient: 2.5},
                'law': {name: 'law', coefficient: 2.0},
                'business': {name: 'business', coefficient: 1.5},
                'digital': {name: 'digital', coefficient: 1.0}
            };
            selectedDomain = domains[ex.domain];
            document.querySelectorAll('.domain-option').forEach(el => {
                el.classList.remove('selected');
            });
            document.querySelectorAll('.domain-option')[
                ['family', 'law', 'business', 'digital'].indexOf(ex.domain)
            ].classList.add('selected');

            calculate();
        }

        function calculate() {
            // Get values
            const fe = document.getElementById('fe').value / 100;
            const cb = document.getElementById('cb').value / 100;
            const sr = document.getElementById('sr').value / 100;
            const cd = document.getElementById('cd').value / 100;
            const pe = document.getElementById('pe').value / 100;
            const dc = selectedDomain.coefficient;

            // Calculate
            const baseScore = fe * cb * sr * cd * pe;
            const finalScore = baseScore * dc;
            const normalizedScore = Math.min(100, finalScore * 100);

            // Display
            document.getElementById('baseScore').textContent = baseScore.toFixed(3);
            document.getElementById('domainCoeff').textContent = dc.toFixed(1);
            document.getElementById('finalCalc').textContent = normalizedScore.toFixed(1);
            document.getElementById('finalScore').textContent = normalizedScore.toFixed(0);

            // Position marker
            const marker = document.getElementById('marker');
            marker.style.left = `${normalizedScore}%`;

            // Interpret
            let level, interpretation;
            if (normalizedScore < 20) {
                level = "MINIMAL MANIPULATION";
                interpretation = "This situation shows minimal manipulation patterns. Communication appears mostly healthy. Continue monitoring for changes.";
            } else if (normalizedScore < 40) {
                level = "MILD MANIPULATION";
                interpretation = "Some manipulation tactics present, typical of marketing or mild boundary testing. Stay aware and maintain clear boundaries.";
            } else if (normalizedScore < 60) {
                level = "MODERATE MANIPULATION";
                interpretation = "Significant manipulation detected. Warning signs are present. Consider documenting interactions and seeking outside perspective.";
            } else if (normalizedScore < 80) {
                level = "HIGH MANIPULATION";
                interpretation = "This is serious manipulation. Multiple tactics being employed. Strong boundaries needed. Consider professional help or legal consultation.";
            } else {
                level = "EXTREME MANIPULATION";
                interpretation = "This situation shows severe manipulation, likely abusive. Immediate action recommended. Document everything, seek professional help, legal protection may be needed.";
            }

            document.getElementById('severityLevel').textContent = level;
            document.getElementById('interpretation').textContent = interpretation;

            // Show results
            document.getElementById('results').classList.add('active');
            document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
        }

        // Initialize
        document.querySelectorAll('input[type="range"]').forEach(slider => {
            updateValue(slider.id);
        });
    </script>
</body>
</html>
