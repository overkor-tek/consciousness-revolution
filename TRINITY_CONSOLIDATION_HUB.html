<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TRINITY CONSOLIDATION HUB</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            background: #0a0a0f;
            color: #00ff88;
            font-family: 'Courier New', monospace;
            min-height: 100vh;
            padding: 20px;
        }
        .header {
            text-align: center;
            padding: 20px;
            border-bottom: 2px solid #00ff88;
            margin-bottom: 20px;
        }
        .header h1 {
            font-size: 2.5em;
            text-shadow: 0 0 20px #00ff88;
        }
        .status-bar {
            display: flex;
            justify-content: space-around;
            padding: 10px;
            background: rgba(0, 255, 136, 0.1);
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .status-item {
            text-align: center;
        }
        .status-value {
            font-size: 2em;
            font-weight: bold;
        }
        .grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        .panel {
            background: rgba(0, 255, 136, 0.05);
            border: 1px solid #00ff88;
            border-radius: 8px;
            padding: 15px;
        }
        .panel h2 {
            color: #00ffff;
            margin-bottom: 10px;
            font-size: 1.2em;
        }
        .instance {
            background: rgba(0, 0, 0, 0.3);
            padding: 10px;
            margin: 5px 0;
            border-radius: 4px;
            border-left: 3px solid #00ff88;
        }
        .instance.offline {
            border-left-color: #ff4444;
            opacity: 0.6;
        }
        .instance-name {
            font-weight: bold;
            color: #ffff00;
        }
        .instance-status {
            font-size: 0.9em;
            color: #888;
        }
        .master-output {
            grid-column: 1 / -1;
            background: rgba(255, 255, 0, 0.1);
            border-color: #ffff00;
        }
        .master-output h2 {
            color: #ffff00;
        }
        .output-content {
            background: #000;
            padding: 15px;
            border-radius: 4px;
            max-height: 300px;
            overflow-y: auto;
            font-size: 0.9em;
            line-height: 1.6;
        }
        .input-section {
            grid-column: 1 / -1;
            display: flex;
            gap: 10px;
        }
        .input-section input {
            flex: 1;
            background: #000;
            border: 1px solid #00ff88;
            color: #00ff88;
            padding: 15px;
            border-radius: 4px;
            font-family: inherit;
            font-size: 1em;
        }
        .input-section button {
            background: #00ff88;
            color: #000;
            border: none;
            padding: 15px 30px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            font-family: inherit;
        }
        .input-section button:hover {
            background: #00ffaa;
        }
        .comms-panel {
            grid-column: 1 / -1;
        }
        .comms-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
        }
        .comm-method {
            background: rgba(0, 0, 0, 0.3);
            padding: 10px;
            border-radius: 4px;
            text-align: center;
        }
        .comm-method.active {
            border: 1px solid #00ff88;
        }
        .comm-method.inactive {
            border: 1px solid #ff4444;
            opacity: 0.5;
        }
        .action-buttons {
            grid-column: 1 / -1;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        .action-btn {
            background: rgba(0, 255, 136, 0.2);
            border: 1px solid #00ff88;
            color: #00ff88;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-family: inherit;
        }
        .action-btn:hover {
            background: rgba(0, 255, 136, 0.4);
        }
        .file-drop {
            grid-column: 1 / -1;
            border: 2px dashed #00ff88;
            padding: 40px;
            text-align: center;
            border-radius: 8px;
            cursor: pointer;
        }
        .file-drop:hover {
            background: rgba(0, 255, 136, 0.1);
        }
        .credits-warning {
            background: rgba(255, 0, 0, 0.2);
            border: 1px solid #ff4444;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            margin-bottom: 20px;
        }
        .credits-warning h3 {
            color: #ff4444;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>TRINITY CONSOLIDATION HUB</h1>
        <p>3 Terminals + 3 Cloud = 1 Output</p>
    </div>

    <div class="credits-warning">
        <h3>$950 x 4 ACCOUNTS = $3,800 CREDITS EXPIRING TOMORROW</h3>
        <p>Use them or lose them!</p>
    </div>

    <div class="status-bar">
        <div class="status-item">
            <div class="status-value" id="convergence">73%</div>
            <div>Convergence</div>
        </div>
        <div class="status-item">
            <div class="status-value" id="terminals">1/3</div>
            <div>Terminals</div>
        </div>
        <div class="status-item">
            <div class="status-value" id="cloud">1/3</div>
            <div>Cloud</div>
        </div>
        <div class="status-item">
            <div class="status-value" id="comms">1/6</div>
            <div>Comms Active</div>
        </div>
    </div>

    <div class="grid">
        <!-- Terminal Instances -->
        <div class="panel">
            <h2>TERMINAL INSTANCES (Local Ollama)</h2>
            <div class="instance" id="t1">
                <div class="instance-name">T1 - PC1 (This Computer)</div>
                <div class="instance-status">Status: ACTIVE | Model: mistral</div>
                <div id="t1-output">Ready for input...</div>
            </div>
            <div class="instance offline" id="t2">
                <div class="instance-name">T2 - PC2 (Ghost)</div>
                <div class="instance-status">Status: OFFLINE | Needs activation</div>
            </div>
            <div class="instance offline" id="t3">
                <div class="instance-name">T3 - PC3 (Ghost)</div>
                <div class="instance-status">Status: OFFLINE | Needs activation</div>
            </div>
        </div>

        <!-- Cloud Instances -->
        <div class="panel">
            <h2>CLOUD INSTANCES (Claude API)</h2>
            <div class="instance" id="c1">
                <div class="instance-name">C1 - Mechanic (Builder)</div>
                <div class="instance-status">Status: ACTIVE | Credit: $950</div>
                <div id="c1-output">Ready for directives...</div>
            </div>
            <div class="instance offline" id="c2">
                <div class="instance-name">C2 - Architect (Designer)</div>
                <div class="instance-status">Status: OFFLINE | Credit: $950</div>
            </div>
            <div class="instance offline" id="c3">
                <div class="instance-name">C3 - Oracle (Analyzer)</div>
                <div class="instance-status">Status: OFFLINE | Credit: $950</div>
            </div>
        </div>

        <!-- Communication Methods -->
        <div class="panel comms-panel">
            <h2>COMMUNICATION METHODS</h2>
            <div class="comms-grid">
                <div class="comm-method active">
                    <div>HTTP API</div>
                    <div style="color: #00ff88;">WORKING</div>
                </div>
                <div class="comm-method inactive">
                    <div>Tailscale</div>
                    <div style="color: #ff4444;">MANUAL</div>
                </div>
                <div class="comm-method inactive">
                    <div>Git Sync</div>
                    <div style="color: #ff4444;">MANUAL</div>
                </div>
                <div class="comm-method inactive">
                    <div>Syncthing</div>
                    <div style="color: #ff4444;">NOT DEPLOYED</div>
                </div>
                <div class="comm-method inactive">
                    <div>SMB Share</div>
                    <div style="color: #ff4444;">NOT SETUP</div>
                </div>
                <div class="comm-method inactive">
                    <div>Google Drive</div>
                    <div style="color: #ff4444;">NOT ACTIVE</div>
                </div>
            </div>
        </div>

        <!-- Master Output -->
        <div class="panel master-output">
            <h2>MASTER OUTPUT (Consolidated)</h2>
            <div class="output-content" id="master-output">
                <p>[Waiting for input...]</p>
                <p>This panel consolidates all terminal and cloud outputs into a single view.</p>
                <p>---</p>
                <p>Current bottleneck: PC2 and PC3 are ghosts (online but unreachable)</p>
                <p>Solution: Deploy automatic file sync (Syncthing or SMB)</p>
            </div>
        </div>

        <!-- Input Section -->
        <div class="input-section">
            <input type="text" id="user-input" placeholder="Enter directive for all instances...">
            <button onclick="broadcastDirective()">BROADCAST</button>
        </div>

        <!-- File Drop Zone -->
        <div class="file-drop" id="file-drop">
            <h3>DROP FILE HERE TO SHARE WITH ALL COMPUTERS</h3>
            <p>Files will be sent via: HTTP API (working) + Tailscale (manual)</p>
        </div>

        <!-- Action Buttons -->
        <div class="action-buttons">
            <button class="action-btn" onclick="pingAllInstances()">Ping All Instances</button>
            <button class="action-btn" onclick="pullFromGit()">Git Pull All</button>
            <button class="action-btn" onclick="openTailscale()">Tailscale Status</button>
            <button class="action-btn" onclick="checkCredits()">Check API Credits</button>
            <button class="action-btn" onclick="loadCyclotronTasks()">Load 122K Tasks</button>
            <button class="action-btn" onclick="deploySync()">Deploy Syncthing</button>
        </div>
    </div>

    <script>
        // State
        let masterLog = [];

        // Add to master output
        function addToMaster(source, message) {
            const timestamp = new Date().toLocaleTimeString();
            masterLog.push({ time: timestamp, source, message });
            updateMasterOutput();
        }

        function updateMasterOutput() {
            const output = document.getElementById('master-output');
            output.innerHTML = masterLog.map(entry =>
                `<p><span style="color:#888">[${entry.time}]</span> <span style="color:#ffff00">${entry.source}:</span> ${entry.message}</p>`
            ).join('');
            output.scrollTop = output.scrollHeight;
        }

        // Broadcast directive to all instances
        function broadcastDirective() {
            const input = document.getElementById('user-input');
            const directive = input.value.trim();
            if (!directive) return;

            addToMaster('COMMANDER', directive);

            // Send to active instances
            sendToT1(directive);
            sendToC1(directive);

            input.value = '';
        }

        // Send to T1 (local Ollama)
        async function sendToT1(message) {
            addToMaster('T1', 'Processing...');
            try {
                const response = await fetch('http://localhost:11434/api/generate', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        model: 'mistral',
                        prompt: message,
                        stream: false
                    })
                });
                const data = await response.json();
                addToMaster('T1', data.response || 'No response');
            } catch (e) {
                addToMaster('T1', 'ERROR: ' + e.message);
            }
        }

        // Send to C1 (Claude API via local proxy)
        async function sendToC1(message) {
            addToMaster('C1', 'Processing via Claude API...');
            // This would hit your local Claude proxy
            // For now, placeholder
            setTimeout(() => {
                addToMaster('C1', 'Ready for implementation. Awaiting API connection.');
            }, 1000);
        }

        // Ping all instances
        function pingAllInstances() {
            addToMaster('SYSTEM', 'Pinging all instances...');

            // Ping Ollama
            fetch('http://localhost:11434/api/tags')
                .then(r => r.json())
                .then(d => addToMaster('T1', `ONLINE - Models: ${d.models?.map(m => m.name).join(', ') || 'none'}`))
                .catch(e => addToMaster('T1', 'OFFLINE - ' + e.message));

            // Ping PC2 via Tailscale
            addToMaster('T2', 'GHOST - 100.85.71.74 (needs daemon)');
            addToMaster('T3', 'GHOST - Needs IP check');

            addToMaster('C1', 'ACTIVE - This session');
            addToMaster('C2', 'OFFLINE - Account ready, needs activation');
            addToMaster('C3', 'OFFLINE - Account ready, needs activation');
        }

        // Git pull all
        function pullFromGit() {
            addToMaster('SYSTEM', 'Would run: git -C /c/Users/dwrek/100X_DEPLOYMENT pull');
            addToMaster('SYSTEM', 'Need to implement via local API endpoint');
        }

        // Open Tailscale
        function openTailscale() {
            addToMaster('SYSTEM', 'Opening Tailscale status...');
            // Would open tailscale status
        }

        // Check credits
        function checkCredits() {
            addToMaster('CREDITS', 'Account 1: $950 (expires tomorrow)');
            addToMaster('CREDITS', 'Account 2: $950 (expires tomorrow)');
            addToMaster('CREDITS', 'Account 3: $950 (expires tomorrow)');
            addToMaster('CREDITS', 'Account 4: $950 (expires tomorrow)');
            addToMaster('CREDITS', 'TOTAL: $3,800 - USE IT OR LOSE IT');
        }

        // Load cyclotron tasks
        function loadCyclotronTasks() {
            addToMaster('CYCLOTRON', 'Loading 122,541 distributed tasks...');
            addToMaster('CYCLOTRON', 'C1: 49,017 tasks');
            addToMaster('CYCLOTRON', 'C2: 36,762 tasks');
            addToMaster('CYCLOTRON', 'C3: 36,762 tasks');
            addToMaster('CYCLOTRON', 'Brain sync needed for task execution');
        }

        // Deploy Syncthing
        function deploySync() {
            addToMaster('SYNC', 'Syncthing deployment needed:');
            addToMaster('SYNC', '1. Install on all 3 computers');
            addToMaster('SYNC', '2. Share folders: .consciousness, .trinity');
            addToMaster('SYNC', '3. Enable auto-sync');
            addToMaster('SYNC', 'Alternative: Windows SMB share');
        }

        // File drop handling
        const dropZone = document.getElementById('file-drop');

        dropZone.addEventListener('dragover', (e) => {
            e.preventDefault();
            dropZone.style.background = 'rgba(0, 255, 136, 0.2)';
        });

        dropZone.addEventListener('dragleave', () => {
            dropZone.style.background = 'transparent';
        });

        dropZone.addEventListener('drop', (e) => {
            e.preventDefault();
            dropZone.style.background = 'transparent';
            const files = e.dataTransfer.files;
            for (let file of files) {
                addToMaster('FILE', `Received: ${file.name} (${(file.size/1024).toFixed(1)}KB)`);
                addToMaster('FILE', 'Would broadcast via HTTP API to all computers');
            }
        });

        // Enter key to send
        document.getElementById('user-input').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') broadcastDirective();
        });

        // Initial status
        addToMaster('SYSTEM', 'Trinity Consolidation Hub initialized');
        addToMaster('SYSTEM', 'Current convergence: 73%');
        addToMaster('SYSTEM', 'Blocker: PC2/PC3 need activation');
    </script>
</body>
</html>
